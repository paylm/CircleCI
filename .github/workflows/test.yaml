name: test

on:
  push:
    branches:
      - "main"
      - "test/**"
  pull_request:
    types: [ opened, synchronize, reopened ]
    paths:
      - "init-appdata/**"
  workflow_dispatch:
  
jobs:
  build: 
    runs-on: ubuntu-latest
    steps:
      - name: Running Build
        shell: bash
        env:
          CR_PAT: ${{ secrets.CR_PAT }}
          MYSQL_HOST: 123
          MYSQL_PORT: 3306
        run: |
          env | grep MYSQL > .env
          echo "check env values"
          cat .env
      - name: Deploy
        uses: WyriHaximus/github-action-helm3@v2
        with:
          exec: helm version && kubectl version
          kubeconfig: '${{ secrets.KUBECONFIG }}'
